/*! WIIBOX 2015-07-17 */
!function(a){function b(b){function c(c){var d="/index.php?r=check/find",e="btn-danger",f=b.btn2,g=0;0===c&&(d="/index.php?r=check/stopFind",e="btn-primary",f=b.btn1,g=1),a.ajax({type:"get",url:d,dataType:"json",beforeSend:function(){NProgress.start()},success:function(b){a("#btnFind").text(f).removeClass("btn-danger").addClass(e)},error:function(){a("#btnFind").text(f+"("+b.fail+")")},complete:function(){NProgress.done(),a("#btnFind").attr("disabled",!1).data("state",g)}})}function d(){function c(c,d){function e(c){a("#"+c).addClass("check-error").find(">span").text(b.abnormal)}switch(c){case"lsusb":d?(1===d.COMMAND?a("#resultLsusb1>span").text(b.normal):e("resultLsusb1"),d.MILL>0?a("#resultLsusb2>span").text(d.MILL):a("#resultLsusb2").addClass("check-error").find(">span").text(0)):(e("resultLsusb1"),e("resultLsusb2"));break;case"check":d?a("#resultProgram>span").text(b.normal):e("resultProgram");break;case"timer":d&&1===d.COMMAND&&1===d.FILE?a("#resultTimer>span").text(b.normal):e("resultTimer");break;case"date":d&&1===d.ZONE?a("#resultDate>span").text(b.normal):e("resultDate");break;case"network":d?(1===d.NET?a("#resultNetwork1>span").text(b.normal):e("resultNetwork1"),1===d.WIIBOX?a("#resultNetwork2>span").text(b.normal):e("resultNetwork2"),""!==d.WIIBOX_DELAY?a("#resultNetwork3>span").text(d.WIIBOX_DELAY):e("resultNetwork3")):(e("resultNetwork1"),e("resultNetwork2"),e("resultNetwork3"));break;case"ip":d?(""!=d.IP?a("#resultIp>span").text(d.IP):e("resultIp"),""!=d.MAC?a("#resultMac>span").text(d.MAC):e("resultMac")):(e("resultIp"),e("resultMac"));break;case"version":d?a("#resultVersion>span").text(d.VERSION):e("resultVersion")}}var d=0,e=[{key:"lsusb",url:"/index.php?r=check/lsusb"},{key:"check",url:"/index.php?r=index/check"},{key:"timer",url:"/index.php?r=check/timer"},{key:"date",url:"/index.php?r=check/date"},{key:"version",url:"/index.php?r=check/version"},{key:"network",url:"/index.php?r=check/network"},{key:"ip",url:"/index.php?r=check/ip"}];NProgress.start(),a(".check-item").removeClass("check-error check-warning"),a(".check-item>span").text(b.state1),a.each(e,function(e,f){a.ajax({type:"get",url:f.url,dataType:"json",success:function(a){c(f.key,a)},error:function(){c(f.key)},complete:function(){d++,6===d&&(NProgress.done(),a("#btnCheck").attr("disabled",!1).removeClass("btn-warning").text(b.btn3Retry))}})})}a("#langNow").text(f[e]),a("#languageMenu").on("click",">li>a",function(){a.cookie("wiiboxLanguage",a(this).data("lang"),{path:"/"}),window.location.reload()}),a("#btnFind").on("click",function(){a(this).attr("disabled",!0),c(+a(this).data("state"))}),a("#btnCheck").on("click",function(){a(this).attr("disabled",!0).addClass("btn-warning").text(b.btn3Ing),d()})}var c=a.cookie("wiiboxLanguage"),d=navigator.language||navigator.userLanguage,e="",f={zh:"简体中文",en:"English"};c?e=-1!==c.indexOf("zh")?"zh":"en":(e=-1!==d.indexOf("zh")?"zh":"en",a.cookie("wiiboxLanguage",e,{path:"/"})),"zh"===e?document.title="控制板自检":document.title="Controller Self-test",a.ajax({type:"get",url:"/static/js/language/"+e+"/check.json",dataType:"json",success:function(c){if(c){var d=a(".page-check").html(),e=Handlebars.compile(d);a(".page-check").html(e(c)).css("display","block"),b(c)}}})}(window.jQuery);
/*! WIIBOX 最后修改于： 2015-07-17 */