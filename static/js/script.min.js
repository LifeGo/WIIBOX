/*! WIIBOX 2014-07-07 */
!function(a){function b(){a.ajax({type:"get",url:d.url.restart,dataType:"json",beforeSend:function(){NProgress.start(),a("#statePill").removeClass("btn-success btn-danger").addClass("btn-warning").text(basei18n.restartIng)},success:function(c){-1===c?b():200===c?(a("#statePill").removeClass("btn-warning btn-danger").addClass("btn-success").text(basei18n.running),d.state=!0):(a("#statePill").removeClass("btn-success btn-warning").addClass("btn-danger").text(basei18n.restartFaild),d.state=!0)},error:function(){a("#statePill").removeClass("btn-success btn-warning").addClass("btn-danger").text(basei18n.restartFaild),d.state=!0},complete:function(){a("#actionRestart").attr("disabled",!1),NProgress.done()}})}function c(){function b(){setTimeout(function(){c()},1e4)}d.state?a.ajax({type:"get",url:d.url.check,dataType:"json",timeout:1e4,beforeSend:function(){d.state=!1},success:function(b){(b.alived.BTC.length>0||b.alived.LTC.length)&&b.super===!0?a("#statePill").removeClass("btn-warning btn-danger").addClass("btn-success").text(basei18n.running):a("#statePill").removeClass("btn-warning btn-success").addClass("btn-danger").text(basei18n.stopped)},error:function(){a("#statePill").removeClass("btn-warning btn-success").addClass("btn-danger").text(basei18n.stopped)},complete:function(){d.state=!0,b()}}):b()}a("#languageMenu").on("click",">li>a",function(){a.cookie("wiiboxLanguage",a(this).data("lang"),{path:"/"}),window.location.reload()});var d={state:!0,url:{restart:a("#urlConfig").data("restart"),check:a("#urlConfig").data("check")}};a("#actionRestart").on("click",function(){a(this).attr("disabled",!0),d.state=!1,b()}),a(document).ready(function(){c()})}(window.jQuery),function(a){a(".page-index").length&&(setTimeout(function(){a("#actionTip").hide()},5e3),a("#selectSpeed>li>a").on("click",function(){var b=a(this).data("value");a("#speed-cur").html(b),a("#run_speed").val(b)}))}(window.jQuery),function(a){function b(a){var b=1099511627776,c=1073741824,d=1048576,e=1024,f="";return f=a.max>b?(a.num/b).toFixed(a.point)+" PB":a.max>c?(a.num/c).toFixed(a.point)+" TB":a.max>d?(a.num/d).toFixed(a.point)+" GB":a.max>e?(a.num/e).toFixed(a.point)+" MB":a.num+" KB"}function c(c){a(".hashrate").highcharts({chart:{type:"spline"},title:{text:""},credits:{enabled:!1},xAxis:{type:"datetime"},yAxis:{title:{text:""},min:0,labels:{formatter:function(){return b({max:this.axis.max,num:this.value,point:1})}}},tooltip:{formatter:function(){var a=b({max:this.y,num:this.y,point:2});return Highcharts.dateFormat("%Y-%m-%d %H:%M:%S",this.x)+"<br/><b>"+this.series.name+"</b><br><b>"+a+"</b>"}},plotOptions:{spline:{lineWidth:2,states:{hover:{lineWidth:3}},marker:{enabled:!1}}},series:[{name:"SHA (khash/s)",color:"#FF7F0E",data:c.DATA.B},{name:"SCRYPT (khash/s)",data:c.DATA.L}],navigation:{menuItemStyle:{fontSize:"10px"}}})}function d(){function b(){setTimeout(function(){d()},1e4)}a.ajax({type:"get",url:a("#urlConfig").data("check"),dataType:"json",timeout:1e4,success:function(b){if(b.alived.BTC.length||b.alived.LTC.length||b.died.BTC.length||b.died.LTC.length){var c="{{#each alived.BTC}}<tr><td>B:{{this}}</td><td>"+basei18n.running+"</td><td>SHA</td></tr>{{/each}}";c+="{{#each alived.LTC}}<tr><td>L:{{this}}</td><td>"+basei18n.running+"</td><td>SCRYPT</td></tr>{{/each}}",c+="{{#each died.BTC}}<tr><td>B:{{this}}</td><td>"+basei18n.stopped+"</td><td>SHA</td></tr>{{/each}}",c+="{{#each died.LTC}}<tr><td>L:{{this}}</td><td>"+basei18n.stopped+"</td><td>SCRYPT</td></tr>{{/each}}";var d=Handlebars.compile(c);a("#statusTable>tbody").html(d(b))}else a("#statusTable>tbody").html('<tr><td colspan="3">-</td></tr>')},error:function(){a("#statusTable>tbody").html('<tr><td colspan="3">'+basei18n.loadFaild+"</td></tr>")},complete:function(){b()}})}a(".page-monitor").length&&(a.ajax({type:"get",url:a(".hashrate").data("url"),dataType:"json",timeout:5e3,success:function(a){c(a)},error:function(){a(".hashrate").text(basei18n.loadFaild)}}),Highcharts.setOptions({global:{useUTC:!1}}),a(document).ready(function(){d()}))}(window.jQuery);
/*! WIIBOX 最后修改于： 2014-07-07 */